Title: Advanced Searching

----

Maincontent: [{"attrs":[],"columns":[{"blocks":[{"content":{"level":"h2","text":"Group by, distinct and subdivide by"},"id":"47b88528-5ffd-4f7d-9ead-a8ef9d39192e","isHidden":false,"type":"heading"},{"content":{"text":"<p>Queries typically return actual records, with one row for each record, or in a downloaded file being a single record.  While that may often be what is required, just as often some sort of summary of the records is required.  Rather than having to download records and manipulate them in a spreadsheet, the summarising can much more easily, and speedily be carried out within the DDb.  This is done by using options found via <strong>more options</strong> &gt; <strong>grouping</strong>.</p>"},"id":"fcd26e6e-ad81-42da-a887-cb0660958ed9","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://irAuUvFr0QTLlx2z"],"src":"","alt":"screen shot of group by menu","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"2ab89726-95b1-453d-9e59-00a757af6a12","isHidden":false,"type":"image"},{"content":{"text":"<p><strong>Group by</strong> when used alone, counts the number of records within a category, eg per vice-county, hectad, or tetrad.</p><p>When an additional <strong>distinct</strong> clause is added to a ‘group by’ query, the frequency count returned refers to the number of distinct variants there are of the field specified by the ‘distinct’ clause.</p><p><strong>Subdivide by</strong> adds columns to the output table, subdividing the records, eg. into date class or year.  </p><p><strong>Distinct</strong> and <strong>subdivide by</strong> can only be used in combination with <strong>group by</strong> in a query.</p><p>An example will help clarify this.</p><p>County Waterford (vcH12) had 242825 records on the DDb (as of October 2023).  This is a large dataset, and in its raw form, rather unwieldy to work with.  But it can be summarised easily, in a variety of ways to meet the needs of the DDb user.</p><p>Adding <strong>group by</strong> localites &gt; hectad, lists hectads with records in the left hand column.  </p>"},"id":"7ae20b77-91c8-4be8-baf6-7852f3bc7cf8","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://4UlZZWxXEfPqVyjK"],"src":"","alt":"screenshot showing selection of localities > hectad withing group by sub menu","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"2922ee49-7002-42fc-965e-67f5637cac9a","isHidden":false,"type":"image"},{"content":{"text":"<p>By default, this will show the frequency of records in each hectad.</p>"},"id":"6cbfbe93-1e0d-4818-b932-45b8ef9a4695","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://mSSfOEmTavmcMcYF"],"src":"","alt":"screenshot of group by results for vice county by hectad","caption":"group by results for vice county by hectad: click to see the query in the DDb (login required)","link":"https://database.bsbi.org/search.php#retrievesaved=0.wxp8r&query=3debf743a704d0c289a70a0d1f18ad4d","ratio":"","crop":"false","fixedwidth":"600","iscentred":"true"},"id":"daf36641-8ef3-4c67-a1de-07ef4bbc2724","isHidden":false,"type":"image"},{"content":{"text":"<p>We will now shift to displaying the number of distinct species per hectad.  We do this by adding a <strong>grouping &gt; distinct</strong> from the <strong>more options</strong> menu, and then selecting species from the list of options.</p>"},"id":"6950d609-b50f-4d17-b991-4c6b45ce0bf2","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://kIFBQXr6HUiD0Kkw"],"src":"","alt":"screenshot for adding grouping > distinct to more options menu","caption":"select grouping &gt; distinct from the more options menu","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"ab2cb65d-cb0d-4b60-9b7c-bd61afaca59d","isHidden":false,"type":"image"},{"content":{"text":"<p>This will count the number of species and hybrids (sub-species are lumped into their parent species) in each hectad, and that figure is displayed in the right hand column in the <strong>results table</strong>.</p>"},"id":"ce97f551-da7b-4d6a-8759-eaa9ec6b22a9","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://WDymCDqSJ2xcVoWd"],"src":"","alt":"screenshot of search for distinct species grouped by hectad for specific Vice County","caption":"search for distinct species grouped by hectad for specific Vice County: click to see the query in the DDb (login required)","link":"https://database.bsbi.org/search.php#retrievesaved=0.wxp95&query=7713f104b26d8d63642854feb3f34a18","ratio":"","crop":"false","fixedwidth":"600","iscentred":"true"},"id":"de0769f7-a605-488d-aa82-5a93ced63a45","isHidden":false,"type":"image"},{"content":{"text":"<p>Next, we will look at the results over a time period.  To do this, we can adding subdivide by date class.</p>"},"id":"bbfeca31-fbf1-4469-a0ac-a6d2385a89bf","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://KkjduHAYIQ6JqXRY"],"src":"","alt":"screenshot of adding grouping > subdivde by (via the more options menu)","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"41351895-dd04-4925-9055-b99e5cb6b0e2","isHidden":false,"type":"image"},{"content":{"text":"<p>This adds 6 columns to the <strong>results table</strong>, one for each BSBI date class, and the values are the number of species &amp; hybrids in each hectad in each date class.  The first row, with no hectad listed, refers to records for the whole vice-county or other locations, with no grid reference given in the original record.</p>"},"id":"66e11d7c-606b-421d-abae-f7fe3ac7edc3","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://Xwdhl3JKYXh0EN5B"],"src":"","alt":"screen shot of distinct species for specific vice county, grouped by hectad and sub-divided by date","caption":"distinct species for specific vice county, grouped by hectad and sub-divided by date: click to see the query in the DDb (login required)","link":"https://database.bsbi.org/search.php#retrievesaved=0.wxp98&query=367faad20cd3b0da4bc97f362c7c31f7","ratio":"","crop":"false","fixedwidth":"600","iscentred":"true"},"id":"ad72d31f-aa4f-49ee-b628-8728e839c429","isHidden":false,"type":"image"},{"content":{"level":"h2","text":"Locality (precision)"},"id":"3ff200cc-75a5-4807-b761-b5a639ca75d2","isHidden":false,"type":"heading"},{"content":{"text":"<p>Under <strong>more options &gt; locality &gt; precision</strong>,  the drop down menu lists many options for minimum or exact grid reference precision.  This allows you to narrow down the precision of records you want to view or summarise.</p>"},"id":"bf3bb74e-4c3f-404c-bc07-678ebdc7b57e","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://bYZGbhZiZDCt5imQ"],"src":"","alt":"screenshot of options for more options > locality > precision","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"600","iscentred":"true"},"id":"e0db5d52-cb82-49dd-b008-d4785326b5ec","isHidden":false,"type":"image"},{"content":{"level":"h2","text":"Grid reference and vice-county validation"},"id":"304f8823-3671-4856-b891-17595bdcb5a3","isHidden":false,"type":"heading"},{"content":{"text":"<p>Under more <strong>options &gt; validation</strong> there is the <strong>grid-ref and vc validation</strong> option.  This checks that the vice-county listed for each record matches the actual vice-county boundary.  There are various options to choose from:</p>"},"id":"0f60259c-1947-46d3-8702-b8017bf8605d","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://x8tndBLCpTXdZtSt"],"src":"","alt":"screenshot of grid reference/vice county validation options","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"600","iscentred":"true"},"id":"ed789df7-9b79-4f94-8163-4cdd496967a8","isHidden":false,"type":"image"},{"content":{"text":"<p>In many queries, it is good practice to include a clause that restricts records to those <strong>where grid-reference and vice-county match</strong>, or perhaps <strong>matching or within 1km of county boundary</strong>, to exclude records that may have a wildly incorrect grid reference, and which have not yet been corrected.</p>"},"id":"f2664314-16d2-4d28-8e50-e9c8bc11b3a9","isHidden":false,"type":"text"},{"content":{"level":"h2","text":"Join with a sub-query"},"id":"f555991e-c2e9-44ed-97bc-65e890024a96","isHidden":false,"type":"heading"},{"content":{"text":"<p>Sub-queries add considerable sophistication to searches.  To create a sub-query, you use <strong>more options &gt; join with a sub-query</strong></p>"},"id":"a6e1e473-fcc4-4a2e-8956-c686b2c07f14","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://g3DYFF6CMaYVGtjd"],"src":"","alt":"screenshot of more options, selecting join with a sub-query","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"ff863ee2-15bd-412a-bfc5-8d7725677acd","isHidden":false,"type":"image"},{"content":{"text":"<p>Next you choose what type of query you want to join with:</p>"},"id":"b2f6059a-ac19-4ed2-8450-4a4be8ca2ca9","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://B6mzf6QOxVf51rfS"],"src":"","alt":"screen shot of join with menu options","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"4b44783a-d58b-4534-891b-63ced10531a5","isHidden":false,"type":"image"},{"content":{"text":"<p>Then you select what the two queries will be joined by:</p>"},"id":"c07cd46f-c2e7-4ed0-a704-4c2a509d850e","isHidden":false,"type":"text"},{"content":{"location":"kirby","image":["file://x1fvFQGUDZjYVc5x"],"src":"","alt":"screenshot of join using menu options","caption":"","link":"","ratio":"","crop":"false","fixedwidth":"400","iscentred":"true"},"id":"aa24ece1-1e34-4d4c-865b-a16db31bc6df","isHidden":false,"type":"image"},{"content":{"notecontent":"You would use a join in instances where you need to link the results of two separate queries.  An example of using a join is searching for a (link: page://saChGY6qURsZo0S4 text: list of infraspecific taxa in a vice county.)  The first query returns the taxa in the vice county.  The second query returns only taxa below the species level.  The join links these two queries together."},"id":"222a78e3-e50b-4ddf-9774-d851d42586b8","isHidden":false,"type":"note"}],"id":"04993ab5-0366-4042-b7c7-c27d797088ec","width":"1/1"}],"id":"90ed9052-dfd2-434f-bd81-a30dc963c019"}]

----

Description: Summary of advanced searching (grouping and joining records) in the DDb

----

Audiences: Vice County Recorders, Recorders, External Agencies/Consultants

----

Requirements: A DDb Login

----

Reviseddate: 

----

Related: 

----

Uuid: itjPRbm5vOEcA7KK